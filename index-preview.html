<!DOCTYPE html>
<html lang="zh-CN" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYX ç­¾åˆ°ç³»ç»Ÿ - Index é¢„è§ˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSSå˜é‡ */
        :root {
            --color-primary: #ffffff;
            --color-secondary: #f5f5f5;
            --color-accent: #0066cc;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-error: #ef4444;
            --color-info: #3b82f6;
            --color-bg-primary: #0f0f0f;
            --color-bg-elevated: #1a1a1a;
            --color-bg-overlay: rgba(0, 0, 0, 0.8);
            --color-text-primary: #ffffff;
            --color-text-secondary: #b3b3b3;
            --color-border-primary: #333333;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            --z-modal: 1000;
            --z-modal-backdrop: 999;
        }

        /* åŸºç¡€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family-base);
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
        }

        /* èƒŒæ™¯è£…é¥°ï¼ˆä¸ç™»å½•é¡µä¿æŒä¸€è‡´çš„ç»ç’ƒé£å±‚æ¬¡ï¼‰ */
        .bg-decoration {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at 20% 80%, rgba(66, 133, 244, 0.10) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(52, 168, 83, 0.10) 0%, transparent 50%);
            z-index: 0;
            pointer-events: none;
        }

        .grid-bg {
            position: fixed;
            inset: 0;
            background-image:
                repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.035) 0 1px, transparent 1px 50px),
                repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.035) 0 1px, transparent 1px 50px);
            background-size: 50px 50px;
            animation: gridMove 30s linear infinite;
            z-index: 0;
            pointer-events: none;
        }

        @keyframes gridMove {
            0% {
                background-position: 0 0, 0 0;
                filter: hue-rotate(0deg);
            }

            100% {
                background-position: 200px 200px, 200px 200px;
                filter: hue-rotate(15deg);
            }
        }

        .noise-overlay {
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            opacity: 0.07;
            mix-blend-mode: soft-light;
            background-size: cover;
            background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200' viewBox='0 0 200 200'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.8'/></svg>");
        }

        /* é™ä½åŠ¨æ•ˆåå¥½æ”¯æŒ */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }

        /* é¡µé¢å¸ƒå±€ */
        .app-container {
            min-height: 100vh;
            background: rgba(0, 0, 0, 0.35);
            -webkit-backdrop-filter: blur(8px) saturate(120%);
            backdrop-filter: blur(8px) saturate(120%);
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
            padding-bottom: var(--spacing-xl);
        }

        /* å¯¼èˆªæ  */
        .navbar {
            /* æ¯›ç»ç’ƒç½®é¡¶å¯¼èˆª */
            background: rgba(26, 26, 26, 0.55);
            border-bottom: 1px solid rgba(255, 255, 255, 0.12);
            -webkit-backdrop-filter: blur(12px) saturate(140%);
            backdrop-filter: blur(12px) saturate(140%);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.35);
            padding: var(--spacing-md) 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            font-weight: 600;
            font-size: 1.125rem;
        }

        .navbar-logo {
            font-size: 1.5rem;
        }

        .navbar-actions {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .theme-toggle {
            background: none;
            border: 1px solid var(--color-border-primary);
            color: var(--color-text-primary);
            padding: var(--spacing-sm);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            background: var(--color-bg-primary);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--color-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            overflow: hidden;
        }

        .user-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .user-name {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .user-level {
            font-size: 0.75rem;
            color: var(--color-text-secondary);
        }

        .btn {
            background: var(--color-accent);
            color: white;
            border: none;
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .btn-sm {
            padding: var(--spacing-xs) var(--spacing-sm);
            font-size: 0.8rem;
        }

        .btn-ghost {
            background: transparent;
            border: 1px solid var(--color-border-primary);
            color: var(--color-text-primary);
        }

        .btn-ghost:hover {
            background: var(--color-bg-primary);
        }

        /* ä¸»å†…å®¹ */
        .main-content {
            flex: 1;
            width: min(95vw, 1600px);
            max-width: 1600px;
            margin: var(--spacing-lg) auto;
            padding: var(--spacing-xl) var(--spacing-lg);
            /* èƒŒæ™¯ç»ç’ƒåŒ– */
            background: rgba(255, 255, 255, 0.04);
            -webkit-backdrop-filter: blur(12px) saturate(140%);
            backdrop-filter: blur(12px) saturate(140%);
            border: 1px solid rgba(255, 255, 255, 0.10);
            border-radius: 18px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
        }

        /* ç­¾åˆ°å¡ç‰‡ï¼ˆç»ç’ƒæ€ï¼‰ */
        .checkin-card {
            background: rgba(255, 255, 255, 0.08);
            -webkit-backdrop-filter: blur(16px) saturate(140%);
            backdrop-filter: blur(16px) saturate(140%);
            border: 1px solid rgba(255, 255, 255, 0.16);
            border-radius: 14px;
            padding: var(--spacing-xl);
            text-align: center;
            margin-bottom: var(--spacing-xl);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.32);
            position: relative;
            overflow: hidden;
        }

        .checkin-card::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            pointer-events: none;
            background: radial-gradient(120% 120% at 0% 0%, rgba(255, 255, 255, 0.18) 0%, transparent 45%),
                radial-gradient(120% 120% at 100% 100%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
        }

        .checkin-title {
            font-size: 2.25rem;
            font-weight: 800;
            margin-bottom: var(--spacing-md);
            background: linear-gradient(135deg, #ffffff, #e6e6e6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: 0.02em;
        }

        .checkin-subtitle {
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-xl);
            font-size: 1.05rem;
        }

        .checkin-btn {
            background: rgba(16, 185, 129, 0.10);
            color: #eafff7;
            border: 1.5px solid rgba(16, 185, 129, 0.45);
            padding: var(--spacing-lg) var(--spacing-xl);
            border-radius: 12px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 6px 18px rgba(16, 185, 129, 0.25);
            -webkit-backdrop-filter: blur(6px) saturate(120%);
            backdrop-filter: blur(6px) saturate(120%);
        }

        .checkin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 28px rgba(16, 185, 129, 0.35);
            background: rgba(16, 185, 129, 0.16);
            border-color: rgba(16, 185, 129, 0.65);
        }

        .checkin-btn:disabled {
            opacity: 0.55;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .checkin-btn.checked-in {
            background: linear-gradient(135deg, var(--color-text-secondary), #6b7280);
            box-shadow: none;
        }

        /* ç»Ÿè®¡å¡ç‰‡ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.06);
            -webkit-backdrop-filter: blur(12px) saturate(140%);
            backdrop-filter: blur(12px) saturate(140%);
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 12px;
            padding: var(--spacing-lg);
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
        }

        .stat-label {
            color: var(--color-text-secondary);
            font-size: 0.875rem;
            margin-bottom: var(--spacing-sm);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--color-primary);
        }

        /* å…‘æ¢ç åˆ—è¡¨ */
        .codes-section {
            background: rgba(255, 255, 255, 0.06);
            -webkit-backdrop-filter: blur(14px) saturate(140%);
            backdrop-filter: blur(14px) saturate(140%);
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 16px;
            padding: var(--spacing-xl);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .codes-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-sm);
        }

        .view-all-btn {
            background: transparent;
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.28);
            padding: 8px 12px;
            border-radius: 10px;
            text-decoration: none;
            font-size: 0.9rem;
            -webkit-backdrop-filter: blur(6px) saturate(120%);
            backdrop-filter: blur(6px) saturate(120%);
            transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease, border-color 0.2s ease;
        }

        .view-all-btn:hover {
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.10);
            border-color: rgba(255, 255, 255, 0.45);
        }

        .codes-title {
            font-size: 1.4rem;
            font-weight: 700;
        }

        /* ä¿¡æ¯è¡Œè¡¨æ ¼æ ·å¼ */
        .code-table {
            display: block;
        }

        .code-header,
        .code-row {
            display: grid;
            grid-template-columns: 1fr 100px 170px 86px;
            align-items: center;
            gap: var(--spacing-sm);
            padding: calc(var(--spacing-sm) + 2px) var(--spacing-md);
            border: 1px solid rgba(255, 255, 255, 0.14);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.04);
            -webkit-backdrop-filter: blur(8px) saturate(120%);
            backdrop-filter: blur(8px) saturate(120%);
        }

        .code-header {
            color: var(--color-text-secondary);
            font-size: 0.85rem;
            background: rgba(255, 255, 255, 0.02);
            border-style: dashed;
        }

        .code-row {
            margin-top: var(--spacing-xs);
        }

        .code-col-code {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        .code-col-actions {
            justify-self: end;
        }

        .code-info {
            flex: 1;
        }

        .code-value {
            font-family: 'Courier New', monospace;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        .code-meta {
            color: var(--color-text-secondary);
            font-size: 0.875rem;
        }

        .amount-badge {
            background: rgba(16, 185, 129, 0.12);
            border: 1px solid rgba(16, 185, 129, 0.38);
            color: #b6ffdf;
            border-radius: 999px;
            padding: 4px 10px;
            font-weight: 700;
            -webkit-backdrop-filter: blur(6px) saturate(120%);
            backdrop-filter: blur(6px) saturate(120%);
            margin-left: var(--spacing-sm);
        }

        .copy-btn {
            background: transparent;
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.28);
            width: 46px;
            height: 40px;
            padding: 0;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease, border-color 0.2s ease;
            -webkit-backdrop-filter: blur(6px) saturate(120%);
            backdrop-filter: blur(6px) saturate(120%);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        /* åŠ¨æ•ˆï¼šè½»å¾®ç¼©æ”¾/å‘å…‰ */
        .copy-btn:hover {
            transform: scale(1.06);
            box-shadow: 0 6px 16px rgba(255, 255, 255, 0.12);
            background: rgba(255, 255, 255, 0.10);
            border-color: rgba(255, 255, 255, 0.45);
        }

        .copy-btn.copied {
            background: rgba(16, 185, 129, 0.12);
            border-color: rgba(16, 185, 129, 0.7);
            color: #10b981;
            transform: scale(1.04);
            box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.35) inset, 0 10px 18px rgba(16, 185, 129, 0.25);
        }

        /* åˆ†é¡µæ§ä»¶ */
        .pagination {
            display: flex;
            justify-content: center;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-lg);
            padding: var(--spacing-lg);
        }

        .page-btn {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border-primary);
            color: var(--color-text-primary);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 40px;
        }

        .page-btn:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: white;
        }

        .page-btn.active {
            background: var(--color-accent);
            border-color: var(--color-accent);
            color: white;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: var(--z-modal);
            align-items: center;
            justify-content: center;
            padding: var(--spacing-lg);
        }

        .modal.active {
            display: flex;
        }

        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--color-bg-overlay);
            backdrop-filter: blur(4px);
            z-index: var(--z-modal-backdrop);
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.08);
            -webkit-backdrop-filter: blur(18px) saturate(140%);
            backdrop-filter: blur(18px) saturate(140%);
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 16px;
            padding: calc(var(--spacing-xl) * 1.1);
            max-width: 420px;
            width: 100%;
            position: relative;
            z-index: var(--z-modal);
            text-align: center;
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
        }

        .modal-header h3 {
            margin-bottom: var(--spacing-md);
            font-size: 1.25rem;
        }

        .modal-body {
            margin-bottom: var(--spacing-lg);
        }

        .code-display {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
        }

        .code-display input {
            background: none;
            border: none;
            color: var(--color-text-primary);
            font-family: 'Courier New', monospace;
            font-size: 1.125rem;
            font-weight: 600;
            text-align: center;
            width: 100%;
            outline: none;
        }

        .modal-footer {
            display: flex;
            gap: var(--spacing-md);
            justify-content: center;
        }

        /* Toasté€šçŸ¥ */
        .toast {
            position: fixed;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            background: var(--color-bg-elevated);
            border: 1px solid var(--color-border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md) var(--spacing-lg);
            z-index: 1100;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            border-color: var(--color-success);
            background: rgba(16, 185, 129, 0.1);
        }

        .toast.error {
            border-color: var(--color-error);
            background: rgba(239, 68, 68, 0.1);
        }

        .toast.warning {
            border-color: var(--color-warning);
            background: rgba(245, 158, 11, 0.1);
        }

        .toast.info {
            border-color: var(--color-info);
            background: rgba(59, 130, 246, 0.1);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .main-content {
                width: min(96vw, 1200px);
                padding: var(--spacing-xl) var(--spacing-lg);
            }

            .stats-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (max-width: 768px) {
            .navbar-content {
                padding: 0 var(--spacing-md);
            }

            .main-content {
                width: 96vw;
                padding: var(--spacing-lg) var(--spacing-md);
                margin: var(--spacing-lg) auto;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            /* ç§»åŠ¨ç«¯æœ€è¿‘å…‘æ¢ç è¡¨æ ¼ç®€åŒ– */
            .code-header,
            .code-row {
                grid-template-columns: 1fr auto;
            }

            .code-row .code-col-amount,
            .code-row .code-col-date {
                grid-column: 1 / -1;
            }

            .code-header .code-col-amount,
            .code-header .code-col-date {
                display: none;
            }

            .modal-content {
                margin: var(--spacing-md);
            }
        }
    </style>
</head>

<body>
    <!-- èƒŒæ™¯å±‚ï¼Œä¸ç™»å½•é¡µä¸€è‡´ -->
    <div class="bg-decoration"></div>
    <div class="grid-bg"></div>
    <div class="noise-overlay"></div>

    <div class="app-container">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <nav class="navbar">
            <div class="navbar-content">
                <div class="navbar-brand">
                    <div class="navbar-logo">ğŸ“…</div>
                    <span>KYX ç­¾åˆ°ç³»ç»Ÿ</span>
                </div>
                <div class="navbar-actions">
                    <button class="theme-toggle" id="themeToggle" title="åˆ‡æ¢ä¸»é¢˜"><span id="themeIcon">ğŸŒ™</span></button>
                    <div class="user-menu" id="userMenu">
                        <div class="user-avatar" id="userAvatar"><span>ğŸ‘¤</span></div>
                        <div class="user-info">
                            <span class="user-name" id="userName">åŠ è½½ä¸­...</span>
                            <span class="user-level" id="userLevel">ä¿¡ä»»ç­‰çº§: -</span>
                        </div>
                    </div>
                    <button class="btn btn-sm btn-ghost" id="logoutBtn">é€€å‡º</button>
                </div>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹ -->
        <main class="main-content">
            <!-- ç­¾åˆ°å¡ç‰‡ -->
            <div class="checkin-card">
                <h1 class="checkin-title">æ¯æ—¥ç­¾åˆ°</h1>
                <p class="checkin-subtitle" id="checkinSubtitle">ä»Šæ—¥è¿˜æœªç­¾åˆ°ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å®Œæˆç­¾åˆ°</p>
                <button class="checkin-btn" id="checkinBtn"><span id="checkinBtnText">ç«‹å³ç­¾åˆ°</span></button>
            </div>

            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-label">æ€»ç­¾åˆ°å¤©æ•°</div>
                    <div class="stat-value" id="totalDays">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">è¿ç»­ç­¾åˆ°å¤©æ•°</div>
                    <div class="stat-value" id="consecutiveDays">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">æœ€å¤§è¿ç»­å¤©æ•°</div>
                    <div class="stat-value" id="maxConsecutiveDays">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">æœ¬æœˆç­¾åˆ°</div>
                    <div class="stat-value" id="monthlyDays">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">å…‘æ¢ç æ•°é‡</div>
                    <div class="stat-value" id="codeCount">-</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">ç´¯è®¡é‡‘é¢</div>
                    <div class="stat-value" id="totalAmount">-</div>
                </div>
            </div>

            <!-- æœ€è¿‘å…‘æ¢ç  -->
            <div class="codes-section">
                <div class="codes-header">
                    <h2 class="codes-title">æœ€è¿‘å…‘æ¢ç </h2>
                    <a class="view-all-btn" href="codes.html" title="æŸ¥çœ‹æˆ‘çš„å…‘æ¢ç ">æŸ¥çœ‹æˆ‘çš„å…‘æ¢ç  â†’</a>
                </div>
                <div id="codesList" class="code-table">
                    <div style="text-align: center; color: var(--color-text-secondary); padding: var(--spacing-xl);">
                        åŠ è½½ä¸­...</div>
                </div>
            </div>
        </main>
    </div>

    <!-- å…‘æ¢ç å¼¹çª— -->
    <div class="modal" id="codeModal">
        <div class="modal-backdrop" onclick="closeModal()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>ç­¾åˆ°æˆåŠŸï¼</h3>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: var(--spacing-md);">æ­å–œæ‚¨è·å¾—å…‘æ¢ç ï¼š</p>
                <div class="code-display"><input type="text" id="modalCodeInput" readonly></div>
                <p style="color: var(--color-text-secondary); font-size: 0.875rem;">é‡‘é¢ï¼š<span
                        id="modalCodeAmount">-</span> å…ƒ</span></p>
            </div>
            <div class="modal-footer"><button class="btn" onclick="copyModalCode()">å¤åˆ¶å…‘æ¢ç </button><button
                    class="btn btn-ghost" onclick="closeModal()">å…³é—­</button></div>
        </div>
    </div>

    <!-- Toastå®¹å™¨ -->
    <div id="toastContainer"></div>

    <script>
        // ä¸ºé¢„è§ˆæä¾›çš„æœ€å°äº¤äº’ï¼ˆä¸ä¼šè¯·æ±‚åç«¯ï¼‰
        (function () {
            const toastContainer = document.getElementById('toastContainer');
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                toastContainer.appendChild(toast);
                setTimeout(() => toast.classList.add('show'), 50);
                setTimeout(() => { toast.classList.remove('show'); setTimeout(() => toast.remove(), 300); }, 2500);
            }

            // ä¸»é¢˜åˆ‡æ¢ï¼ˆä»…å‰ç«¯ï¼‰
            document.getElementById('themeToggle').addEventListener('click', () => {
                const html = document.documentElement;
                const current = html.getAttribute('data-theme') || 'dark';
                html.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
                document.getElementById('themeIcon').textContent = current === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
            });

            // æ¨¡æ‹Ÿç”¨æˆ·ä¿¡æ¯
            document.getElementById('userName').textContent = 'é¢„è§ˆç”¨æˆ·';
            document.getElementById('userLevel').textContent = 'ä¿¡ä»»ç­‰çº§: 1';

            // ç­¾åˆ°æŒ‰é’®æ¼”ç¤º
            let checkedIn = false;
            document.getElementById('checkinBtn').addEventListener('click', () => {
                if (checkedIn) return;
                checkedIn = true;
                document.getElementById('checkinBtn').classList.add('checked-in');
                document.getElementById('checkinBtn').disabled = true;
                document.getElementById('checkinBtnText').textContent = 'ä»Šæ—¥å·²ç­¾åˆ°';
                document.getElementById('checkinSubtitle').textContent = 'ä»Šæ—¥ç­¾åˆ°å·²å®Œæˆï¼Œæ˜å¤©å†æ¥å§ï¼';
                showCodeModal('KYXABC1234', 9.99);
                showToast('ç­¾åˆ°æˆåŠŸï¼', 'success');
            });

            // å¼¹çª—å±•ç¤ºä¸å¤åˆ¶
            window.showCodeModal = function (code, amount) {
                document.getElementById('modalCodeInput').value = code;
                document.getElementById('modalCodeAmount').textContent = '$' + parseFloat(amount || 0).toFixed(2);
                document.getElementById('codeModal').classList.add('active');
            };
            window.closeModal = function () { document.getElementById('codeModal').classList.remove('active'); };
            window.copyModalCode = async function () {
                const val = document.getElementById('modalCodeInput').value;
                try { await navigator.clipboard.writeText(val); showToast('å…‘æ¢ç å·²å¤åˆ¶', 'success'); closeModal(); }
                catch (e) { showToast('å¤åˆ¶å¤±è´¥', 'error'); }
            };

            // ç¤ºä¾‹åˆ—è¡¨
            const demoList = [
                { code: 'KYXCODE001', amount: 5.00, source: 'ç­¾åˆ°', created_at: new Date(Date.now() - 1000 * 60 * 3).toISOString() },
                { code: 'KYXCODE002', amount: 10.00, source: 'ç³»ç»Ÿèµ é€', created_at: new Date(Date.now() - 1000 * 60 * 10).toISOString() },
                { code: 'KYXCODE003', amount: 2.50, source: 'ç­¾åˆ°', created_at: new Date(Date.now() - 1000 * 60 * 20).toISOString() },
                { code: 'KYXCODE004', amount: 8.00, source: 'ç­¾åˆ°', created_at: new Date(Date.now() - 1000 * 60 * 40).toISOString() },
                { code: 'KYXCODE005', amount: 6.00, source: 'ç³»ç»Ÿèµ é€', created_at: new Date(Date.now() - 1000 * 60 * 80).toISOString() },
                { code: 'KYXCODE006', amount: 3.00, source: 'ç­¾åˆ°', created_at: new Date(Date.now() - 1000 * 60 * 120).toISOString() }
            ]
                .sort((a, b) => new Date(b.created_at) - new Date(a.created_at))
                .slice(0, 5);
            const listEl = document.getElementById('codesList');
            listEl.innerHTML = `
                <div class="code-header">
                    <div>å…‘æ¢ç </div>
                    <div>é‡‘é¢</div>
                    <div>æ—¥æœŸ</div>
                    <div class="code-col-actions">æ“ä½œ</div>
                </div>
            ` + demoList.map(c => {
                const padded = (c.code + '................................').slice(0, 32); // å›ºå®š32å­—ç¬¦æ˜¾ç¤º
                const source = c.source || 'ç­¾åˆ°';
                return `
                <div class="code-row">
                    <div class="code-col-code">${padded} <span style="color:var(--color-text-secondary);margin-left:8px;">(${source})</span></div>
                    <div class="code-col-amount"><span class="amount-badge">$${c.amount.toFixed(2)}</span></div>
                    <div class="code-col-date">${new Date(c.created_at).toLocaleString()}</div>
                    <div class="code-col-actions">
                        <button class="copy-btn" onclick="(async btn=>{await navigator.clipboard.writeText('${c.code}'); btn.classList.add('copied'); btn.querySelector('.icon-copy').style.display='none'; btn.querySelector('.icon-check').style.display='block'; setTimeout(()=>{btn.classList.remove('copied'); btn.querySelector('.icon-copy').style.display='block'; btn.querySelector('.icon-check').style.display='none';},2000);})(this)">
                            <svg class="icon-copy" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                <rect x="9" y="9" width="11" height="11" rx="2" stroke="currentColor" stroke-width="1.6"/>
                                <rect x="4" y="4" width="11" height="11" rx="2" stroke="currentColor" stroke-width="1.6" opacity="0.6"/>
                            </svg>
                            <svg class="icon-check" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" style="display:none">
                                <path d="M20 6L9 17L4 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>
                </div>`
            }).join('');
        })();
    </script>
</body>

</html>